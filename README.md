<div align="center">

# SIHO — Hotel Information System

<!-- Optional: Replace with your logo path -->
<!-- <img src=".github/assets/logo.png" alt="Project Logo" width="140" /> -->

[![Build Status](https://img.shields.io/badge/build-passing-brightgreen.svg)](#) [![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE) [![PHP](https://img.shields.io/badge/PHP-8.2%2B-777bb3.svg?logo=php)](#) [![Laravel](https://img.shields.io/badge/Laravel-12.x-ff2d20.svg?logo=laravel)](#)

</div>

## Overview

SIHO (Sistem Informasi Hotel) is a Laravel + Livewire application for managing hotel operations end‑to‑end: room types, room inventory, reservations, billing and payments, promotions, reporting, and basic user self‑service. It aims to streamline small/medium property workflows without introducing heavy frontend frameworks.

- Who it’s for: independent hotels or small chains needing a pragmatic, self‑hosted solution.
- What it solves: unified workflow to manage availability, create reservations, track payments, and generate reports with a clean, server‑rendered UI.

> Note: This README is a complete template. Fill the commented placeholders where applicable and trim sections you don’t need.

## Table of Contents

- [Overview](#overview)
- [Features](#features)
- [Tech Stack](#tech-stack)
- [Getting Started](#getting-started)
  - [Prerequisites](#prerequisites)
  - [Installation](#installation)
  - [Running Locally](#running-locally)
  - [Database Setup and Seeding](#database-setup-and-seeding)
- [Configuration](#configuration)
  - [Environment Variables](#environment-variables)
- [Usage](#usage)
  - [User Walkthrough](#user-walkthrough)
  - [Admin Walkthrough](#admin-walkthrough)
  - [Screenshots](#screenshots)
- [API](#api)
  - [Endpoints](#endpoints)
  - [Examples](#examples)
- [Testing](#testing)
- [Project Structure](#project-structure)
- [Deployment](#deployment)
  - [Production Build Checklist](#production-build-checklist)
  - [Docker (Example)](#docker-example)
  - [Bare‑metal/Nginx + PHP‑FPM](#bare-metalnginx--php-fpm)
- [Troubleshooting](#troubleshooting)
- [Contributing](#contributing)
- [Changelog](#changelog)
- [Roadmap](#roadmap)
- [License](#license)
- [Acknowledgments](#acknowledgments)
- [Maintainers](#maintainers)

## Features

- Role‑based areas: Public, User (guest), Admin
- Room Types and Rooms management (status, price, images)
- Availability calendar and reservation management (multi‑room per reservation)
- Billing and payments (manual upload proof, admin review/approval)
- User self‑service (view bills, reservations, profile, invoice PDF)
- F&B sample flow (menu browsing, add to cart, cashier panel)
- CSV exports for admin lists (users, rooms, reservations, payments, contacts)
- Reporting (revenue/occupancy samples) and dashboards

## Tech Stack

- Backend: PHP 8.2+, Laravel 12.x, Eloquent ORM
- UI: Blade, Livewire 3.x
- Build: Vite, Node.js 18+
- PDF: dompdf/dompdf
- Dev Tooling: Laravel Pint (formatter), Laravel Pail (logs), Collision (developer exceptions)
- Package highlights (composer.json):
  - "laravel/framework": ^12.0
  - "livewire/livewire": ^3.6
  - "dompdf/dompdf": ^2.0
  - Dev: "laravel/pint", "laravel/pail", "laravel/sail", "nunomaduro/collision"

## Getting Started

### Prerequisites

- PHP 8.2+ with required extensions (ctype, curl, fileinfo, mbstring, openssl, pdo, tokenizer, xml)
- Composer
- Node.js 18+ and npm (or pnpm/yarn)
- A database (MySQL 8.x recommended). SQLite can be used for quick local trials.

### Installation

```bash
git clone https://github.com/your-org/siho.git
cd siho

composer install
npm install

cp .env.example .env
php artisan key:generate
```

Configure your database and mail settings in `.env`, then link storage for public uploads:

```bash
php artisan storage:link
```

### Running Locally

Option A — One command (concurrently runs app server, queue listener, pail logs, and Vite):

```bash
composer run dev
```

Option B — Run services individually:

```bash
# PHP dev server
php artisan serve

# Queue listener (if using async queues)
php artisan queue:listen --tries=1

# Dev frontend (Vite)
npm run dev

# Optional real‑time log tail
php artisan pail --timeout=0
```

### Database Setup and Seeding

Run database migrations:

```bash
php artisan migrate
```

Optionally seed with example data:

```bash
php artisan db:seed
# or
php artisan migrate:fresh --seed
```

> Tip: For quick local tryouts, you can switch to SQLite by setting `DB_CONNECTION=sqlite` and pointing `DB_DATABASE` to a file path. Remember to run migrations again.

## Configuration

### Environment Variables

Copy `.env.example` to `.env` and update these variables:

```env
# Core
APP_NAME=SIHO
APP_ENV=local
APP_KEY=base64:...               # generated by artisan key:generate
APP_DEBUG=true
APP_URL=http://127.0.0.1:8000

# Database (MySQL example)
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=siho
DB_USERNAME=root
DB_PASSWORD=secret

# Filesystem
FILESYSTEM_DISK=public

# Mail
MAIL_MAILER=log                  # use smtp in production
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USERNAME=apikey
MAIL_PASSWORD=********
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=no-reply@hotel.example.com
MAIL_FROM_NAME="SIHO"

# Queues
QUEUE_CONNECTION=sync            # use database/redis in production

# Payments (manual transfer info displayed to users)
PAYMENT_BANK_NAME=BCA
PAYMENT_BANK_ACCOUNT=1234567890
PAYMENT_BANK_HOLDER=Grand Luxe Hotel
PAYMENT_BANK_NOTE=Include reference code in transfer note
```

> Replace credentials with your own. Never commit secrets to version control.

## Usage

### User Walkthrough

1. Open the homepage and browse room types and gallery
2. Start booking: pick check‑in and check‑out dates
3. Select how many rooms per room type
4. Review summary, apply a voucher code if available
5. Confirm to create a reservation and bill; upload payment proof
6. Track your bills and reservations under the user dashboard

### Admin Walkthrough

- Manage rooms, room types, facilities, and images
- Review availability via the calendar and manage reservations
- Review incoming payment proofs (approve/reject) and export CSVs
- Check dashboards for high‑level indicators and sample reports

### Screenshots

<!-- TODO: Replace with actual image paths or remove this section -->
![Home](.github/assets/screenshot-home.png)
![Booking Wizard](.github/assets/screenshot-booking.png)
![Admin Dashboard](.github/assets/screenshot-admin.png)

## API

While SIHO focuses on server‑rendered pages, there are a few HTTP endpoints used by the app.

### Endpoints

- POST `/fnb/cart/add` (auth required)
  - Body: `menu_item_id` (int), optional `qty` (int, default 1)
  - Response: `{ ok: boolean, qty: number, items: object }`

- GET `/admin/users/export` (auth role: superadmin) → CSV stream
- GET `/admin/rooms/export` (auth role: superadmin) → CSV stream
- GET `/admin/reservations/export` (auth role: superadmin) → CSV stream
- GET `/admin/payments/export` (auth role: superadmin) → CSV stream
- GET `/admin/contacts/export` (auth role: superadmin) → CSV stream

> Authentication and authorization are enforced by Laravel middleware (e.g., `auth`, `role:*`).

### Examples

Request

```http
POST /fnb/cart/add HTTP/1.1
Content-Type: application/json

{ "menu_item_id": 42, "qty": 2 }
```

Sample Response

```json
{
  "ok": true,
  "qty": 2,
  "items": {
    "42": 2
  }
}
```

## Testing

> Note: This distribution does not include automated tests by default.

Manual smoke checks you can run locally:

- Booking flow (dates → select → review → confirm → upload proof)
- Bills list (filters: Paid/Pending/Rejected/Unpaid)
- Payments review (approve/reject) and invoice PDF email
- Room/Type CRUD and images management
- CSV exports

Optional: Add PHPUnit + Pest (recommended)

```bash
composer require --dev phpunit/phpunit pestphp/pest
php artisan test
```

> If you add tests, remember to set an isolated test database (e.g., sqlite) and configure CI accordingly.

## Project Structure

```
app/
  Actions/                # application actions (e.g., F&B order creation)
  Http/Controllers/       # controllers (auth, admin exports, invoices)
  Livewire/               # Livewire components (Admin/Auth/Public/User/Fnb)
  Mail/                   # Mailable classes
  Models/                 # Eloquent models (User, Role, Room, RoomType, Reservation, Bill, ...)
  Providers/              # Laravel service providers
config/                   # application configuration
database/
  migrations/             # database migrations
  seeders/                # database seeders
public/                   # document root (index.php)
resources/
  views/                  # Blade templates (layouts, livewire views, emails, pdf)
  js/, css/               # frontend assets (Vite)
routes/
  web.php                 # web routes (user/admin/public)
storage/                  # logs, compiled views, app & public storage
vendor/                   # composer dependencies
composer.json             # PHP dependencies & scripts (dev, etc.)
package.json              # frontend dependencies & scripts
vite.config.js            # Vite configuration
```

## Deployment

### Production Build Checklist

- Set environment: `APP_ENV=production`, `APP_DEBUG=false`, correct `APP_URL`
- Build frontend: `npm run build`
- Cache config/routes/views: `php artisan config:cache route:cache view:cache`
- Run migrations: `php artisan migrate --force`
- Ensure storage symlink: `php artisan storage:link`
- Ensure a queue worker runs (for emails and async tasks)

### Docker (Example)

> This is a minimal example. Adjust versions, networks, and volumes as needed.

```yaml
version: '3.8'
services:
  app:
    image: webdevops/php-nginx:8.2
    working_dir: /app
    volumes:
      - ./:/app
    environment:
      - WEB_DOCUMENT_ROOT=/app/public
    ports:
      - "8080:80"
    depends_on:
      - db
  db:
    image: mysql:8
    environment:
      MYSQL_DATABASE: siho
      MYSQL_USER: siho
      MYSQL_PASSWORD: secret
      MYSQL_ROOT_PASSWORD: root
    ports:
      - "3306:3306"
    volumes:
      - db-data:/var/lib/mysql
volumes:
  db-data:
```

### Bare‑metal/Nginx + PHP‑FPM

1) Point your vhost root to `public/`
2) Ensure writable permissions for `storage/` and `bootstrap/cache/`
3) Configure PHP‑FPM pool (PHP 8.2+) and Nginx fastcgi settings
4) Follow the production checklist above
5) Run queue workers via Supervisor or systemd. Example (Supervisor):

```ini
[program:siho-queue]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/siho/artisan queue:work --sleep=3 --tries=1 --timeout=90
autostart=true
autorestart=true
numprocs=1
redirect_stderr=true
stdout_logfile=/var/log/supervisor/siho-queue.log
```

## Troubleshooting

- 500/APP_KEY missing → run `php artisan key:generate`
- 403/419 CSRF issues → ensure same `APP_URL` and correct session domain/cookie settings
- Storage not accessible → run `php artisan storage:link` and verify file permissions
- Email not sent → switch to `MAIL_MAILER=log` locally or configure SMTP properly
- Migration errors → verify DB connectivity and run `php artisan migrate:fresh` (dev only)
- Queue not processing → ensure a worker is running and `QUEUE_CONNECTION` is correct

## Contributing

We welcome contributions! Here’s how to get started:

- Branching: `main` is protected; create feature branches `feature/*` or `fix/*`
- Code style: PSR‑12 — run `./vendor/bin/pint` before pushing
- Commits: small, focused, imperative (e.g., `feat:`, `fix:`, `chore:`)
- PRs: describe purpose, summary of changes, screenshots for UI, migration notes
- Checks: verify `composer run dev` works locally, run `npm run build` without errors

> For larger changes, please open an issue first to discuss the scope.

## Changelog

All notable changes will be documented here.

- v0.1.0 — Initial public release (baseline features, UI flows)
<!-- Add newer versions at the top: vX.Y.Z — YYYY‑MM‑DD — summary -->

## Roadmap

- Payment gateway integration (midterm)
- Multi‑language support (i18n)
- Multi‑property support (chain management)
- Advanced reporting (exports, charts)
- API surface expansion (token auth)

## License

MIT License — see the [LICENSE](LICENSE) file for details.

## Acknowledgments

- Laravel, Livewire, DomPDF, and the broader PHP community
- Any design kits or icon sets used in the UI
<!-- Add credits to templates, themes, or third‑party services here -->

## Maintainers

- Your Name — <you@example.com>
<!-- Add a team or company contact and links (website, docs, support portal) -->

